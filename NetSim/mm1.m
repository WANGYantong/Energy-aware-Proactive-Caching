clc;
clear;
ave_t = zeros(10,100);
p = zeros(10,100);
nn = 10:10:5000;    %customers

for d = 1:length(nn)
    for s = 1:100 
        n = nn(d);    %??????
        dt = exprnd(6.7,1,n);    %????????     lambda = 0.1493
        st = exprnd(6.8,1,n);    %????????????    mu = 0.1587
        a = zeros(1,n);    %???????
        b = zeros(1,n);    %??????????
        c = zeros(1,n);    %???????
        a(1) = 0;
        
        for i = 2:n
            a(i) = a(i-1) + dt(i-1);
        end
        
        b(1) = 0;
        c(1) = b(1) + st(1);
        
        for i = 2:n
%???i??????????????????????????????????????
           if(a(i) <= c(i-1))
               b(i) = c(i-1);
%???i???????????????????????????????????
           else
               b(i) = a(i);
           end
%?i??????????????????+?????????
           c(i) = b(i) + st(i);
       end
                     
        cost = zeros(1,n);
        for i = 1:n
            cost(i)=c(i)-a(i);    %?i???????????
        end
        T = c(n);    %???
        p(d,s) = sum(st)/T;
        ave_t(d,s) = sum(cost)/n;
    end
end
pc = sum(p,2)/100;    %????
aver_tc = sum(ave_t,2) / 100;    %???????????

%????
figure;
plot(nn,aver_tc);
grid on;
title('Average Waiting Time  Unit: second')
xlabel('The number of arriving')
ylabel('Average Waiting Time')   

